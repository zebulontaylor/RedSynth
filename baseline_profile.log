Parsing netlist.json...
Building graph...
Profiling optimize_placement...
Starting force-directed placement (Spring Layout)...
Running custom force-directed simulation with Y-penalty (Scale: 94)...
Legalizing placement with 4 phases (padding: [30, 24, 18, 12])...
Generating spiral offsets cache...
Initial wire cost (from spring layout): 14414.9

=== Phase 1/4 (padding=30) ===
  Placing 0/111...  Placing 10/111...  Placing 20/111...  Placing 30/111...  Placing 40/111...  Placing 50/111...  Placing 60/111...  Placing 70/111...  Placing 80/111...  Placing 90/111...  Placing 100/111...  Placing 110/111...  Phase 1 complete. Total wire cost: 78102.0

=== Phase 2/4 (padding=24) ===
  Placing 0/111...  Placing 10/111...  Placing 20/111...  Placing 30/111...  Placing 40/111...  Placing 50/111...  Placing 60/111...  Placing 70/111...  Placing 80/111...  Placing 90/111...  Placing 100/111...  Placing 110/111...  Phase 2 complete. Total wire cost: 62085.0

=== Phase 3/4 (padding=18) ===
  Placing 0/111...  Placing 10/111...  Placing 20/111...  Placing 30/111...  Placing 40/111...  Placing 50/111...  Placing 60/111...  Placing 70/111...  Placing 80/111...  Placing 90/111...  Placing 100/111...  Placing 110/111...  Phase 3 complete. Total wire cost: 57725.0

=== Phase 4/4 (padding=12) ===
  Placing 0/111...  Placing 10/111...  Placing 20/111...  Placing 30/111...  Placing 40/111...  Placing 50/111...  Placing 60/111...  Placing 70/111...  Placing 80/111...  Placing 90/111...  Placing 100/111...  Placing 110/111...  Phase 4 complete. Total wire cost: 43087.0

Placement complete (4 phases).
Final wire cost: 43087.0 (started at 14414.9, -198.9% change)
optimize_placement took 53.60 seconds
         55231768 function calls (55224847 primitive calls) in 53.602 seconds

   Ordered by: cumulative time
   List reduced from 1311 to 20 due to restriction <20>

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.243    0.243   53.602   53.602 /home/engine/project/redsynth/placement.py:524(optimize_placement)
        1    9.638    9.638   37.007   37.007 /home/engine/project/redsynth/placement.py:210(legalize_placement)
 19188866   24.703    0.000   24.703    0.000 /home/engine/project/redsynth/placement.py:38(query)
        1    2.823    2.823   16.353   16.353 /home/engine/project/redsynth/placement.py:65(calculate_spring_layout)
   452000    0.732    0.000    8.559    0.000 /home/engine/project/.venv/lib/python3.12/site-packages/scipy/sparse/_index.py:29(__getitem__)
   452000    2.193    0.000    4.841    0.000 /home/engine/project/.venv/lib/python3.12/site-packages/scipy/sparse/_index.py:212(_validate_indices)
   468000    1.113    0.000    2.915    0.000 /home/engine/project/.venv/lib/python3.12/site-packages/numpy/linalg/_linalg.py:2623(norm)
   452000    0.634    0.000    2.776    0.000 /home/engine/project/.venv/lib/python3.12/site-packages/scipy/sparse/_compressed.py:542(_get_intXint)
      4/2    0.000    0.000    2.297    1.148 /home/engine/project/.venv/lib/python3.12/site-packages/networkx/utils/decorators.py:783(func)
        1    0.000    0.000    1.954    1.954 <class 'networkx.utils.decorators.argmap'> compilation 8:1(argmap_spring_layout_5)
   474004    1.942    0.000    1.942    0.000 {method 'reduce' of 'numpy.ufunc' objects}
        1    0.001    0.001    1.930    1.930 /home/engine/project/.venv/lib/python3.12/site-packages/networkx/drawing/layout.py:451(spring_layout)
        1    0.000    0.000    1.928    1.928 <class 'networkx.utils.decorators.argmap'> compilation 16:1(argmap__fruchterman_reingold_13)
        1    0.713    0.713    1.928    1.928 /home/engine/project/.venv/lib/python3.12/site-packages/networkx/drawing/layout.py:659(_fruchterman_reingold)
  1810001    1.152    0.000    1.698    0.000 /home/engine/project/.venv/lib/python3.12/site-packages/scipy/sparse/_sputils.py:350(isintlike)
  1000000    1.420    0.000    1.420    0.000 {built-in method _heapq.heappop}
   452000    1.156    0.000    1.156    0.000 {built-in method scipy.sparse._sparsetools.get_csr_submatrix}
   452000    0.173    0.000    0.807    0.000 {method 'sum' of 'numpy.ndarray' objects}
   452000    0.127    0.000    0.634    0.000 /home/engine/project/.venv/lib/python3.12/site-packages/numpy/_core/_methods.py:49(_sum)
  3661753    0.464    0.000    0.469    0.000 {built-in method builtins.isinstance}


Profiling route_nets...
Starting routing (Voxel Mode)...
Building routing grid obstacles (Voxel Mode)...
Validating pin spacing...
Pre-claiming pin locations...
  Reserved 1582 unique pin grid locations
Prioritizing nets...
430/430 nets left to route.429/430 nets left to route.428/430 nets left to route.427/430 nets left to route.426/430 nets left to route.425/430 nets left to route.424/430 nets left to route.423/430 nets left to route.422/430 nets left to route.421/430 nets left to route.420/430 nets left to route.419/430 nets left to route.418/430 nets left to route.417/430 nets left to route.416/430 nets left to route.415/430 nets left to route.414/430 nets left to route.413/430 nets left to route.412/430 nets left to route.411/430 nets left to route.410/430 nets left to route.409/430 nets left to route.408/430 nets left to route.407/430 nets left to route.406/430 nets left to route.405/430 nets left to route.404/430 nets left to route.403/430 nets left to route.402/430 nets left to route.401/430 nets left to route.400/430 nets left to route.399/430 nets left to route.398/430 nets left to route.397/430 nets left to route.396/430 nets left to route.395/430 nets left to route.394/430 nets left to route.393/430 nets left to route.392/430 nets left to route.391/430 nets left to route.390/430 nets left to route.389/430 nets left to route.388/430 nets left to route.387/430 nets left to route.386/430 nets left to route.385/430 nets left to route.384/430 nets left to route.383/430 nets left to route.382/430 nets left to route.381/430 nets left to route.380/430 nets left to route.379/430 nets left to route.378/430 nets left to route.377/430 nets left to route.376/430 nets left to route.375/430 nets left to route.374/430 nets left to route.373/430 nets left to route.372/430 nets left to route.371/430 nets left to route.370/430 nets left to route.369/430 nets left to route.368/430 nets left to route.367/430 nets left to route.366/430 nets left to route.365/430 nets left to route.364/430 nets left to route.363/430 nets left to route.362/430 nets left to route.361/430 nets left to route.360/430 nets left to route.359/430 nets left to route.358/430 nets left to route.357/430 nets left to route.356/430 nets left to route.355/430 nets left to route.354/430 nets left to route.353/430 nets left to route.352/430 nets left to route.351/430 nets left to route.350/430 nets left to route.349/430 nets left to route.348/430 nets left to route.347/430 nets left to route.346/430 nets left to route.345/430 nets left to route.344/430 nets left to route.343/430 nets left to route.342/430 nets left to route.341/430 nets left to route.340/430 nets left to route.339/430 nets left to route.338/430 nets left to route.337/430 nets left to route.336/430 nets left to route.335/430 nets left to route.334/430 nets left to route.333/430 nets left to route.332/430 nets left to route.331/430 nets left to route.330/430 nets left to route.329/430 nets left to route.328/430 nets left to route.327/430 nets left to route.326/430 nets left to route.325/430 nets left to route.324/430 nets left to route.323/430 nets left to route.322/430 nets left to route.321/430 nets left to route.320/430 nets left to route.319/430 nets left to route.318/430 nets left to route.317/430 nets left to route.316/430 nets left to route.315/430 nets left to route.314/430 nets left to route.313/430 nets left to route.312/430 nets left to route.311/430 nets left to route.310/430 nets left to route.309/430 nets left to route.308/430 nets left to route.307/430 nets left to route.306/430 nets left to route.305/430 nets left to route.304/430 nets left to route.303/430 nets left to route.302/430 nets left to route.301/430 nets left to route.300/430 nets left to route.299/430 nets left to route.298/430 nets left to route.297/430 nets left to route.296/430 nets left to route.295/430 nets left to route.294/430 nets left to route.293/430 nets left to route.292/430 nets left to route.291/430 nets left to route.290/430 nets left to route.289/430 nets left to route.288/430 nets left to route.287/430 nets left to route.286/430 nets left to route.285/430 nets left to route.284/430 nets left to route.283/430 nets left to route.282/430 nets left to route.281/430 nets left to route.280/430 nets left to route.279/430 nets left to route.278/430 nets left to route.277/430 nets left to route.276/430 nets left to route.275/430 nets left to route.274/430 nets left to route.273/430 nets left to route.272/430 nets left to route.271/430 nets left to route.270/430 nets left to route.269/430 nets left to route.268/430 nets left to route.267/430 nets left to route.266/430 nets left to route.265/430 nets left to route.264/430 nets left to route.263/430 nets left to route.262/430 nets left to route.261/430 nets left to route.260/430 nets left to route.259/430 nets left to route.258/430 nets left to route.257/430 nets left to route.256/430 nets left to route.255/430 nets left to route.254/430 nets left to route.253/430 nets left to route.252/430 nets left to route.251/430 nets left to route.250/430 nets left to route.249/430 nets left to route.248/430 nets left to route.247/430 nets left to route.246/430 nets left to route.245/430 nets left to route.244/430 nets left to route.243/430 nets left to route.242/430 nets left to route.241/430 nets left to route.240/430 nets left to route.239/430 nets left to route.238/430 nets left to route.237/430 nets left to route.236/430 nets left to route.235/430 nets left to route.234/430 nets left to route.233/430 nets left to route.232/430 nets left to route.231/430 nets left to route.230/430 nets left to route.229/430 nets left to route.228/430 nets left to route.227/430 nets left to route.226/430 nets left to route.225/430 nets left to route.224/430 nets left to route.223/430 nets left to route.222/430 nets left to route.221/430 nets left to route.220/430 nets left to route.219/430 nets left to route.218/430 nets left to route.217/430 nets left to route.216/430 nets left to route.215/430 nets left to route.214/430 nets left to route.213/430 nets left to route.212/430 nets left to route.211/430 nets left to route.210/430 nets left to route.209/430 nets left to route.208/430 nets left to route.207/430 nets left to route.206/430 nets left to route.205/430 nets left to route.204/430 nets left to route.203/430 nets left to route.202/430 nets left to route.201/430 nets left to route.200/430 nets left to route.199/430 nets left to route.198/430 nets left to route.197/430 nets left to route.196/430 nets left to route.195/430 nets left to route.194/430 nets left to route.193/430 nets left to route.192/430 nets left to route.191/430 nets left to route.190/430 nets left to route.189/430 nets left to route.188/430 nets left to route.187/430 nets left to route.186/430 nets left to route.185/430 nets left to route.184/430 nets left to route.183/430 nets left to route.182/430 nets left to route.181/430 nets left to route.180/430 nets left to route.179/430 nets left to route.178/430 nets left to route.177/430 nets left to route.176/430 nets left to route.175/430 nets left to route.174/430 nets left to route.173/430 nets left to route.172/430 nets left to route.171/430 nets left to route.170/430 nets left to route.169/430 nets left to route.168/430 nets left to route.167/430 nets left to route.166/430 nets left to route.165/430 nets left to route.164/430 nets left to route.163/430 nets left to route.162/430 nets left to route.161/430 nets left to route.160/430 nets left to route.159/430 nets left to route.158/430 nets left to route.157/430 nets left to route.156/430 nets left to route.155/430 nets left to route.154/430 nets left to route.153/430 nets left to route.152/430 nets left to route.151/430 nets left to route.150/430 nets left to route.149/430 nets left to route.148/430 nets left to route.147/430 nets left to route.146/430 nets left to route.145/430 nets left to route.144/430 nets left to route.143/430 nets left to route.142/430 nets left to route.141/430 nets left to route.140/430 nets left to route.139/430 nets left to route.138/430 nets left to route.137/430 nets left to route.136/430 nets left to route.135/430 nets left to route.134/430 nets left to route.133/430 nets left to route.132/430 nets left to route.131/430 nets left to route.130/430 nets left to route.  [Rip-up] Net net_61 ripping up: {'net_60'}
130/430 nets left to route.  [Rip-up] Net net_63 ripping up: {'net_62'}
130/430 nets left to route.129/430 nets left to route.  [Rip-up] Net net_64 ripping up: {'net_63'}
129/430 nets left to route.  [Rip-up] Net net_66 ripping up: {'net_64', 'net_65'}
130/430 nets left to route.129/430 nets left to route.128/430 nets left to route.127/430 nets left to route.126/430 nets left to route.125/430 nets left to route.124/430 nets left to route.123/430 nets left to route.122/430 nets left to route.121/430 nets left to route.120/430 nets left to route.119/430 nets left to route.118/430 nets left to route.117/430 nets left to route.116/430 nets left to route.115/430 nets left to route.114/430 nets left to route.113/430 nets left to route.112/430 nets left to route.111/430 nets left to route.110/430 nets left to route.109/430 nets left to route.108/430 nets left to route.107/430 nets left to route.106/430 nets left to route.105/430 nets left to route.104/430 nets left to route.103/430 nets left to route.102/430 nets left to route.101/430 nets left to route.100/430 nets left to route.99/430 nets left to route.98/430 nets left to route.97/430 nets left to route.96/430 nets left to route.95/430 nets left to route.94/430 nets left to route.93/430 nets left to route.  [Rip-up] Net net_44 ripping up: {'net_45'}
93/430 nets left to route.92/430 nets left to route.  [Rip-up] Net net_136 ripping up: {'net_346'}
92/430 nets left to route.91/430 nets left to route.90/430 nets left to route.89/430 nets left to route.88/430 nets left to route.87/430 nets left to route.86/430 nets left to route.85/430 nets left to route.84/430 nets left to route.83/430 nets left to route.82/430 nets left to route.81/430 nets left to route.80/430 nets left to route.79/430 nets left to route.78/430 nets left to route.77/430 nets left to route.76/430 nets left to route.  [Rip-up] Net net_116 ripping up: {'net_371'}
76/430 nets left to route.75/430 nets left to route.  [Rip-up] Net net_117 ripping up: {'net_372'}
75/430 nets left to route.74/430 nets left to route.73/430 nets left to route.  [Rip-up] Net net_115 ripping up: {'net_116'}
73/430 nets left to route.  [Rip-up] Net net_110 ripping up: {'net_365'}
73/430 nets left to route.72/430 nets left to route.71/430 nets left to route.70/430 nets left to route.69/430 nets left to route.68/430 nets left to route.67/430 nets left to route.66/430 nets left to route.65/430 nets left to route.64/430 nets left to route.63/430 nets left to route.62/430 nets left to route.61/430 nets left to route.60/430 nets left to route.59/430 nets left to route.58/430 nets left to route.57/430 nets left to route.56/430 nets left to route.55/430 nets left to route.54/430 nets left to route.53/430 nets left to route.52/430 nets left to route.51/430 nets left to route.50/430 nets left to route.49/430 nets left to route.48/430 nets left to route.47/430 nets left to route.46/430 nets left to route.45/430 nets left to route.44/430 nets left to route.43/430 nets left to route.42/430 nets left to route.41/430 nets left to route.40/430 nets left to route.39/430 nets left to route.38/430 nets left to route.37/430 nets left to route.36/430 nets left to route.35/430 nets left to route.34/430 nets left to route.33/430 nets left to route.32/430 nets left to route.31/430 nets left to route.30/430 nets left to route.29/430 nets left to route.28/430 nets left to route.27/430 nets left to route.26/430 nets left to route.25/430 nets left to route.24/430 nets left to route.23/430 nets left to route.22/430 nets left to route.21/430 nets left to route.20/430 nets left to route.19/430 nets left to route.18/430 nets left to route.17/430 nets left to route.16/430 nets left to route.15/430 nets left to route.14/430 nets left to route.13/430 nets left to route.12/430 nets left to route.11/430 nets left to route.10/430 nets left to route.9/430 nets left to route.8/430 nets left to route.  [Rip-up] Net net_64 ripping up: {'net_65', 'net_63'}
8/430 nets left to route.  [Rip-up] Net net_65 ripping up: {'net_64', 'net_66'}
9/430 nets left to route.
  [Fail] Net 'net_45' from (-22, -3, -1) to (-21, -3, 10)
         Closest point: (-21, -3, 6), distance remaining: 4.00
         Reason: max_steps after 100001 steps
         Goal seen as neighbor: False, Goal added to queue: False
         Blocking: 1 by own node (allowed)
8/430 nets left to route.
  [Fail] Net 'net_45' from (-11, -3, 1) to (-1, -3, 2)
         Closest point: (-3, -3, 2), distance remaining: 2.00
         Reason: max_steps after 100001 steps
         Goal seen as neighbor: False, Goal added to queue: False
         Blocking: 1 by own node (allowed), 4 by wires (net_37, net_36, net_38 +1 more)
8/430 nets left to route.  [Rip-up] Net net_45 ripping up: {'net_44'}
9/430 nets left to route.  [Rip-up] Net net_346 ripping up: {'net_414', 'net_412', 'net_413'}
11/430 nets left to route.10/430 nets left to route.9/430 nets left to route.  [Rip-up] Net net_116 ripping up: {'net_371', 'net_368'}
  [Rip-up] Net net_116 ripping up: {'net_117'}
11/430 nets left to route.10/430 nets left to route.  [Rip-up] Net net_63 ripping up: {'net_62', 'net_64'}
10/430 nets left to route.9/430 nets left to route.  [Rip-up] Net net_66 ripping up: {'net_74', 'net_65'}
10/430 nets left to route.
  [Fail] Net 'net_44' from (-22, -4, -1) to (-21, -4, 10)
         Closest point: (-21, -5, 11), distance remaining: 3.00
         Reason: max_steps after 100001 steps
         Goal seen as neighbor: False, Goal added to queue: False
         Blocking: 1 by own node (allowed), 3 by wires (net_35, net_43, net_44)
9/430 nets left to route.  [Rip-up] Net net_44 ripping up: {'net_45'}
10/430 nets left to route.Stopping routing after 60.0 seconds.

Routing complete. Failed connections: 3/979
route_nets took 71.67 seconds
         147438339 function calls in 71.665 seconds

   Ordered by: cumulative time
   List reduced from 62 to 20 due to restriction <20>

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.415    0.415   71.665   71.665 /home/engine/project/redsynth/routing.py:597(route_nets)
     1002   11.143    0.011   71.014    0.071 /home/engine/project/redsynth/routing.py:357(a_star)
  1256336   31.550    0.000   53.496    0.000 /home/engine/project/redsynth/routing.py:174(get_neighbors)
  7606831    7.427    0.000   11.531    0.000 /home/engine/project/redsynth/routing.py:90(get_segment_footprint)
 32543152    4.478    0.000    4.478    0.000 /home/engine/project/redsynth/routing.py:74(is_blocked)
 30854927    3.732    0.000    3.732    0.000 {method 'add' of 'set' objects}
 28651469    3.255    0.000    3.255    0.000 {method 'append' of 'list' objects}
  2185368    0.956    0.000    2.553    0.000 /home/engine/project/redsynth/routing.py:68(_is_cardinal)
  3110440    1.673    0.000    2.399    0.000 /home/engine/project/redsynth/routing.py:358(h)
 27570004    2.226    0.000    2.226    0.000 {built-in method builtins.abs}
  1257321    1.840    0.000    1.840    0.000 {built-in method _heapq.heappop}
  2185919    0.902    0.000    1.602    0.000 {built-in method builtins.sum}
  5289541    0.696    0.000    0.696    0.000 /home/engine/project/redsynth/routing.py:69(<genexpr>)
   214932    0.087    0.000    0.598    0.000 {built-in method builtins.all}
  1852117    0.452    0.000    0.452    0.000 {built-in method _heapq.heappush}
  1730585    0.432    0.000    0.432    0.000 {method 'update' of 'set' objects}
   308483    0.148    0.000    0.411    0.000 /home/engine/project/redsynth/routing.py:236(<genexpr>)
        1    0.000    0.000    0.105    0.105 /home/engine/project/redsynth/routing.py:12(__init__)
        1    0.046    0.046    0.105    0.105 /home/engine/project/redsynth/routing.py:30(_build_grid)
    73734    0.032    0.000    0.100    0.000 /home/engine/project/redsynth/routing.py:243(<genexpr>)


